{"remainingRequest":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/babel-loader/lib/index.js!/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/eslint-loader/index.js??ref--13-0!/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/page/util.js","dependencies":[{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/page/util.js","mtime":1612496398476},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/cache-loader/dist/cjs.js","mtime":1591588454175},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/babel-loader/lib/index.js","mtime":1606707433631},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/eslint-loader/index.js","mtime":1591241791494}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEtvbnZhIGZyb20gImtvbnZhIjsKdmFyIGltYWdlTGlzdCA9IFsvLyAiaHR0cDovL2xvcmVtcGl4ZWwuY29tLzQwMC80MDAvZmFzaGlvbiIsCiJodHRwczovL2ltZy52aXBraWRzdGF0aWMuY29tL2JlZXNjaG9vbC9zZXJ2ZXIvMjAyMDA4MjcvMjM1Y2Q4NTEtMmE1MS00NzQ1LWI1YTUtNWMyNDUxZmI4ZTU5LmpwZyIsIC8vIDI0MDDDlzExMjgKImh0dHBzOi8vbWVkaWEudmlwa2lkc3RhdGljLmNvbS9iZWVzY2hvb2wvZGVmYXVsdC8yMDIwMDcyOC9kZDQ4MGMwMy0xZTdlLTQ5MWYtYTEzOC04ZjQzODI0OTZmZGUucG5nIiwgLy8gMTQwNXgxMDQ3CiJodHRwczovL21lZGlhLnZpcGtpZHN0YXRpYy5jb20vYmVlc2Nob29sL2RlZmF1bHQvMjAyMDA3MjgvZWJkNTIzMDYtMWE4My00OTYzLWIyMDUtZTM2OTUwOGMzN2E0LmpwZWciLCAiIGh0dHBzOi8vaW1nLnZpcGtpZHN0YXRpYy5jb20vYmVlc2Nob29sL3NlcnZlci8yMDIwMDgyNi8xM2JlZGM5Ny1kNDdiLTRmYzMtOWEzNC0yMDY1MmE5YzUwNjEucG5nIiwgImh0dHBzOi8vaW1nLnZpcGtpZHN0YXRpYy5jb20vYmVlc2Nob29sL3NlcnZlci8yMDIwMDgyNS80MDg4Yzg4Mi02OWVkLTRmMmEtYjI4NC0wMjQxYWY4M2NlNGMucG5nIiwgImh0dHBzOi8vaW1nLnZpcGtpZHN0YXRpYy5jb20vYmVlc2Nob29sL3NlcnZlci8yMDIwMDgyNS9lYjYyN2JhNC0xMjM4LTQ0YjYtOGU5MC01N2IzNWUzZTc3MjEucG5nIiwgImh0dHBzOi8vaW1nLnZpcGtpZHN0YXRpYy5jb20vYmVlc2Nob29sL3NlcnZlci8xNTk4MzM3ODcyNTQ5L1dlY2hhdElNRzM1LmpwZWciLCAiaHR0cHM6Ly9pbWd4LnZpcGtpZHN0YXRpYy5jb20vaW1nL2JlZXNjaG9vbC9zZXJ2ZXIvMjAyMDA4MDQvYjdmNGFkM2UtMTEzMS00Nzc4LWE2YWQtY2JiZGVmNWMwMjE4LmpwZyIgLy8gImh0dHA6Ly9iLmhpcGhvdG9zLmJhaWR1LmNvbS9pbWFnZS9waWMvaXRlbS8zNTliMDMzYjViYjVjOWVhNWMwZTNjMjNkMTM5YjYwMDNiZjNiMzc0LmpwZyIsIC8vIDgwMMOXNTMzCi8vICJodHRwOi8vYS5oaXBob3Rvcy5iYWlkdS5jb20vaW1hZ2UvcGljL2l0ZW0vOGQ1NDk0ZWVmMDFmM2EyOTJkMjQ3MjE5OWQyNWJjMzE1ZDYwN2M3Yy5qcGciLAovLyAiaHR0cDovL2cuaGlwaG90b3MuYmFpZHUuY29tL2ltYWdlL3BpYy9pdGVtLzZkODE4MDBhMTlkOGJjM2U3NzBiZDAwZDg2OGJhNjFlYTlkMzQ1ZjIuanBnIgpdOwp2YXIgQ19XSURUSCA9IDEyMDA7CnZhciBDX0hFSUdIVCA9IDgwMDsgLy8g57yp5pS+5ZCO5aSn5bCPCgp2YXIgc2NhbGVXSCA9IGZ1bmN0aW9uIHNjYWxlV0goaW1hZ2VXLCBpbWFnZUgsIG1heFdpZHRoLCBtYXhIZWlnaHQpIHsKICAvLyDnlKjkuo7orr7lrprlm77niYfnmoTlrr3luqblkozpq5jluqYKICB2YXIgdGVtcFdpZHRoOwogIHZhciB0ZW1wSGVpZ2h0OwoKICBpZiAoaW1hZ2VXID4gMCAmJiBpbWFnZUggPiAwKSB7CiAgICAvL+WOn+WbvueJh+WuvemrmOavlOS+iyDlpKfkuo4g5oyH5a6a55qE5a696auY5q+U5L6L77yM6L+Z5bCx6K+05piO5LqG5Y6f5Zu+54mH55qE5a695bqm5b+F54S2ID4g6auY5bqmCiAgICBpZiAoaW1hZ2VXIC8gaW1hZ2VIID49IG1heFdpZHRoIC8gbWF4SGVpZ2h0KSB7CiAgICAgIGlmIChpbWFnZVcgPiBtYXhXaWR0aCkgewogICAgICAgIHRlbXBXaWR0aCA9IG1heFdpZHRoOyAvLyDmjInljp/lm77niYfnmoTmr5Tkvovov5vooYznvKnmlL4KCiAgICAgICAgdGVtcEhlaWdodCA9IGltYWdlSCAqIG1heFdpZHRoIC8gaW1hZ2VXOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOaMieWOn+WbvueJh+eahOWkp+Wwj+i/m+ihjOe8qeaUvgogICAgICAgIHRlbXBXaWR0aCA9IGltYWdlVzsKICAgICAgICB0ZW1wSGVpZ2h0ID0gaW1hZ2VIOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvLyDljp/lm77niYfnmoTpq5jluqblv4XnhLYgPiDlrr3luqYKICAgICAgaWYgKGltYWdlSCA+IG1heEhlaWdodCkgewogICAgICAgIHRlbXBIZWlnaHQgPSBtYXhIZWlnaHQ7IC8vIOaMieWOn+WbvueJh+eahOavlOS+i+i/m+ihjOe8qeaUvgoKICAgICAgICB0ZW1wV2lkdGggPSBpbWFnZVcgKiBtYXhIZWlnaHQgLyBpbWFnZUg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5oyJ5Y6f5Zu+54mH55qE5aSn5bCP6L+b6KGM57yp5pS+CiAgICAgICAgdGVtcFdpZHRoID0gaW1hZ2VXOwogICAgICAgIHRlbXBIZWlnaHQgPSBpbWFnZUg7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gewogICAgICB3aWR0aDogcGFyc2VJbnQodGVtcFdpZHRoKSwKICAgICAgaGVpZ2h0OiBwYXJzZUludCh0ZW1wSGVpZ2h0KQogICAgfTsKICB9Cn07IC8vIOiOt+WPluiDjOaZr+WbvueJh3h55YGP56e76YePCgoKdmFyIGdldEJnSW1nWFlPZmZzZXQgPSBmdW5jdGlvbiBnZXRCZ0ltZ1hZT2Zmc2V0KHdpZHRoLCBoZWlnaHQpIHsKICBpZiAod2lkdGgpIHsKICAgIHJldHVybiBDX1dJRFRIID4gd2lkdGggPyBNYXRoLmZsb29yKENfV0lEVEggLSB3aWR0aCkgLyAyIDogMDsKICB9CgogIGlmIChoZWlnaHQpIHsKICAgIHJldHVybiBDX0hFSUdIVCA+IGhlaWdodCA/IE1hdGguZmxvb3IoQ19IRUlHSFQgLSBoZWlnaHQpIC8gMiA6IDA7CiAgfQp9OwoKdmFyIHJvdGF0ZVBvaW50ID0gZnVuY3Rpb24gcm90YXRlUG9pbnQoX3JlZiwgcmFkKSB7CiAgdmFyIHggPSBfcmVmLngsCiAgICAgIHkgPSBfcmVmLnk7CiAgdmFyIHJjb3MgPSBNYXRoLmNvcyhyYWQpOwogIHZhciByc2luID0gTWF0aC5zaW4ocmFkKTsKICByZXR1cm4gewogICAgeDogeCAqIHJjb3MgLSB5ICogcnNpbiwKICAgIHk6IHkgKiByY29zICsgeCAqIHJzaW4KICB9Owp9OwoKdmFyIHJvdGF0ZUFyb3VuZENlbnRlciA9IGZ1bmN0aW9uIHJvdGF0ZUFyb3VuZENlbnRlcihub2RlLCByb3RhdGlvbikgewogIHZhciB0b3BMZWZ0ID0gewogICAgeDogLW5vZGUud2lkdGgoKSAvIDIsCiAgICB5OiAtbm9kZS5oZWlnaHQoKSAvIDIKICB9OwogIHZhciBjdXJyZW50ID0gcm90YXRlUG9pbnQodG9wTGVmdCwgS29udmEuZ2V0QW5nbGUobm9kZS5yb3RhdGlvbigpKSk7CiAgdmFyIHJvdGF0ZWQgPSByb3RhdGVQb2ludCh0b3BMZWZ0LCBLb252YS5nZXRBbmdsZShyb3RhdGlvbikpOwogIHZhciBkeCA9IHJvdGF0ZWQueCAtIGN1cnJlbnQueCwKICAgICAgZHkgPSByb3RhdGVkLnkgLSBjdXJyZW50Lnk7CiAgbm9kZS5yb3RhdGlvbihyb3RhdGlvbik7CiAgbm9kZS54KG5vZGUueCgpICsgZHgpOwogIG5vZGUueShub2RlLnkoKSArIGR5KTsKfTsKCmV4cG9ydCB7IHNjYWxlV0gsIGltYWdlTGlzdCwgZ2V0QmdJbWdYWU9mZnNldCwgcm90YXRlQXJvdW5kQ2VudGVyLCBDX1dJRFRILCBDX0hFSUdIVCB9Ow=="},{"version":3,"sources":["/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/page/util.js"],"names":["Konva","imageList","C_WIDTH","C_HEIGHT","scaleWH","imageW","imageH","maxWidth","maxHeight","tempWidth","tempHeight","width","parseInt","height","getBgImgXYOffset","Math","floor","rotatePoint","rad","x","y","rcos","cos","rsin","sin","rotateAroundCenter","node","rotation","topLeft","current","getAngle","rotated","dx","dy"],"mappings":"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","sourcesContent":["\nimport Konva from \"konva\";\n\nconst imageList = [\n  // \"http://lorempixel.com/400/400/fashion\",\n  \"https://img.vipkidstatic.com/beeschool/server/20200827/235cd851-2a51-4745-b5a5-5c2451fb8e59.jpg\", // 2400×1128\n  \"https://media.vipkidstatic.com/beeschool/default/20200728/dd480c03-1e7e-491f-a138-8f4382496fde.png\", // 1405x1047\n\n  \"https://media.vipkidstatic.com/beeschool/default/20200728/ebd52306-1a83-4963-b205-e369508c37a4.jpeg\",\n\n  \" https://img.vipkidstatic.com/beeschool/server/20200826/13bedc97-d47b-4fc3-9a34-20652a9c5061.png\",\n  \"https://img.vipkidstatic.com/beeschool/server/20200825/4088c882-69ed-4f2a-b284-0241af83ce4c.png\",\n  \"https://img.vipkidstatic.com/beeschool/server/20200825/eb627ba4-1238-44b6-8e90-57b35e3e7721.png\",\n  \"https://img.vipkidstatic.com/beeschool/server/1598337872549/WechatIMG35.jpeg\",\n  \"https://imgx.vipkidstatic.com/img/beeschool/server/20200804/b7f4ad3e-1131-4778-a6ad-cbbdef5c0218.jpg\"\n\n  // \"http://b.hiphotos.baidu.com/image/pic/item/359b033b5bb5c9ea5c0e3c23d139b6003bf3b374.jpg\", // 800×533\n  // \"http://a.hiphotos.baidu.com/image/pic/item/8d5494eef01f3a292d2472199d25bc315d607c7c.jpg\",\n  // \"http://g.hiphotos.baidu.com/image/pic/item/6d81800a19d8bc3e770bd00d868ba61ea9d345f2.jpg\"\n];\n\nconst C_WIDTH = 1200;\nconst C_HEIGHT = 800;\n\n// 缩放后大小\nconst scaleWH = (imageW, imageH, maxWidth, maxHeight) => {\n  // 用于设定图片的宽度和高度\n  let tempWidth;\n  let tempHeight;\n\n  if (imageW > 0 && imageH > 0) {\n    //原图片宽高比例 大于 指定的宽高比例，这就说明了原图片的宽度必然 > 高度\n    if (imageW / imageH >= maxWidth / maxHeight) {\n      if (imageW > maxWidth) {\n        tempWidth = maxWidth;\n        // 按原图片的比例进行缩放\n        tempHeight = (imageH * maxWidth) / imageW;\n      } else {\n        // 按原图片的大小进行缩放\n        tempWidth = imageW;\n        tempHeight = imageH;\n      }\n    } else {\n      // 原图片的高度必然 > 宽度\n      if (imageH > maxHeight) {\n        tempHeight = maxHeight;\n        // 按原图片的比例进行缩放\n        tempWidth = (imageW * maxHeight) / imageH;\n      } else {\n        // 按原图片的大小进行缩放\n        tempWidth = imageW;\n        tempHeight = imageH;\n      }\n    }\n    return {\n      width: parseInt(tempWidth),\n      height: parseInt(tempHeight)\n    };\n  }\n};\n\n // 获取背景图片xy偏移量\nconst getBgImgXYOffset = (width, height) => {\n  if (width) {\n    return C_WIDTH > width ? Math.floor((C_WIDTH - width)) / 2 : 0;\n  }\n  if (height) {\n    return C_HEIGHT > height ?  Math.floor((C_HEIGHT - height)) / 2 : 0;\n  }\n};\n\n\n\n  \nconst rotatePoint = ({ x, y }, rad) => {\n  const rcos = Math.cos(rad);\n  const rsin = Math.sin(rad);\n  return { x: x * rcos - y * rsin, y: y * rcos + x * rsin };\n};\n\nconst rotateAroundCenter = (node, rotation) =>{\n  const topLeft = { x: -node.width() / 2, y: -node.height() / 2 };\n  const current = rotatePoint(topLeft, Konva.getAngle(node.rotation()));\n  const rotated = rotatePoint(topLeft, Konva.getAngle(rotation));\n  const dx = rotated.x - current.x,\n    dy = rotated.y - current.y;\n  node.rotation(rotation);\n  node.x(node.x() + dx);\n  node.y(node.y() + dy);\n};\n\nexport { scaleWH, imageList, getBgImgXYOffset, rotateAroundCenter, C_WIDTH, C_HEIGHT };\n"]}]}