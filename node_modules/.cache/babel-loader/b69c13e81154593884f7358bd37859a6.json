{"remainingRequest":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/babel-loader/lib/index.js!/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/eslint-loader/index.js??ref--13-0!/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/page/util.js","dependencies":[{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/page/util.js","mtime":1612676572175},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/cache-loader/dist/cjs.js","mtime":1591588454175},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/babel-loader/lib/index.js","mtime":1606707433631},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/eslint-loader/index.js","mtime":1591241791494}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEtvbnZhIGZyb20gImtvbnZhIjsKdmFyIGltYWdlTGlzdCA9IFsvLyAiaHR0cDovL2xvcmVtcGl4ZWwuY29tLzQwMC80MDAvZmFzaGlvbiIsCiJodHRwczovL2ltZy52aXBraWRzdGF0aWMuY29tL2JlZXNjaG9vbC9zZXJ2ZXIvMjAyMDA4MjcvMjM1Y2Q4NTEtMmE1MS00NzQ1LWI1YTUtNWMyNDUxZmI4ZTU5LmpwZyIsIC8vIDI0MDDDlzExMjgKImh0dHBzOi8vbWVkaWEudmlwa2lkc3RhdGljLmNvbS9iZWVzY2hvb2wvZGVmYXVsdC8yMDIwMDcyOC9kZDQ4MGMwMy0xZTdlLTQ5MWYtYTEzOC04ZjQzODI0OTZmZGUucG5nIiwgLy8gMTQwNXgxMDQ3CiJodHRwczovL21lZGlhLnZpcGtpZHN0YXRpYy5jb20vYmVlc2Nob29sL2RlZmF1bHQvMjAyMDA3MjgvZWJkNTIzMDYtMWE4My00OTYzLWIyMDUtZTM2OTUwOGMzN2E0LmpwZWciLCAiIGh0dHBzOi8vaW1nLnZpcGtpZHN0YXRpYy5jb20vYmVlc2Nob29sL3NlcnZlci8yMDIwMDgyNi8xM2JlZGM5Ny1kNDdiLTRmYzMtOWEzNC0yMDY1MmE5YzUwNjEucG5nIiwgImh0dHBzOi8vaW1nLnZpcGtpZHN0YXRpYy5jb20vYmVlc2Nob29sL3NlcnZlci8yMDIwMDgyNS80MDg4Yzg4Mi02OWVkLTRmMmEtYjI4NC0wMjQxYWY4M2NlNGMucG5nIiwgImh0dHBzOi8vaW1nLnZpcGtpZHN0YXRpYy5jb20vYmVlc2Nob29sL3NlcnZlci8yMDIwMDgyNS9lYjYyN2JhNC0xMjM4LTQ0YjYtOGU5MC01N2IzNWUzZTc3MjEucG5nIiwgImh0dHBzOi8vaW1nLnZpcGtpZHN0YXRpYy5jb20vYmVlc2Nob29sL3NlcnZlci8xNTk4MzM3ODcyNTQ5L1dlY2hhdElNRzM1LmpwZWciLCAiaHR0cHM6Ly9pbWd4LnZpcGtpZHN0YXRpYy5jb20vaW1nL2JlZXNjaG9vbC9zZXJ2ZXIvMjAyMDA4MDQvYjdmNGFkM2UtMTEzMS00Nzc4LWE2YWQtY2JiZGVmNWMwMjE4LmpwZyIgLy8gImh0dHA6Ly9iLmhpcGhvdG9zLmJhaWR1LmNvbS9pbWFnZS9waWMvaXRlbS8zNTliMDMzYjViYjVjOWVhNWMwZTNjMjNkMTM5YjYwMDNiZjNiMzc0LmpwZyIsIC8vIDgwMMOXNTMzCi8vICJodHRwOi8vYS5oaXBob3Rvcy5iYWlkdS5jb20vaW1hZ2UvcGljL2l0ZW0vOGQ1NDk0ZWVmMDFmM2EyOTJkMjQ3MjE5OWQyNWJjMzE1ZDYwN2M3Yy5qcGciLAovLyAiaHR0cDovL2cuaGlwaG90b3MuYmFpZHUuY29tL2ltYWdlL3BpYy9pdGVtLzZkODE4MDBhMTlkOGJjM2U3NzBiZDAwZDg2OGJhNjFlYTlkMzQ1ZjIuanBnIgpdOyAvLyBjb25zdCBDX1dJRFRIID0gMTIwMDsKLy8gY29uc3QgQ19IRUlHSFQgPSA3MDA7Ci8vIOe8qeaUvuWQjuWkp+WwjwoKdmFyIHNjYWxlV0ggPSBmdW5jdGlvbiBzY2FsZVdIKGltYWdlVywgaW1hZ2VILCBtYXhXaWR0aCwgbWF4SGVpZ2h0KSB7CiAgLy8g55So5LqO6K6+5a6a5Zu+54mH55qE5a695bqm5ZKM6auY5bqmCiAgdmFyIHRlbXBXaWR0aDsKICB2YXIgdGVtcEhlaWdodDsKCiAgaWYgKGltYWdlVyA+IDAgJiYgaW1hZ2VIID4gMCkgewogICAgLy/ljp/lm77niYflrr3pq5jmr5Tkvosg5aSn5LqOIOaMh+WumueahOWuvemrmOavlOS+i++8jOi/meWwseivtOaYjuS6huWOn+WbvueJh+eahOWuveW6puW/heeEtiA+IOmrmOW6pgogICAgaWYgKGltYWdlVyAvIGltYWdlSCA+PSBtYXhXaWR0aCAvIG1heEhlaWdodCkgewogICAgICBpZiAoaW1hZ2VXID4gbWF4V2lkdGgpIHsKICAgICAgICB0ZW1wV2lkdGggPSBtYXhXaWR0aDsgLy8g5oyJ5Y6f5Zu+54mH55qE5q+U5L6L6L+b6KGM57yp5pS+CgogICAgICAgIHRlbXBIZWlnaHQgPSBpbWFnZUggKiBtYXhXaWR0aCAvIGltYWdlVzsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDmjInljp/lm77niYfnmoTlpKflsI/ov5vooYznvKnmlL4KICAgICAgICB0ZW1wV2lkdGggPSBpbWFnZVc7CiAgICAgICAgdGVtcEhlaWdodCA9IGltYWdlSDsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgLy8g5Y6f5Zu+54mH55qE6auY5bqm5b+F54S2ID4g5a695bqmCiAgICAgIGlmIChpbWFnZUggPiBtYXhIZWlnaHQpIHsKICAgICAgICB0ZW1wSGVpZ2h0ID0gbWF4SGVpZ2h0OyAvLyDmjInljp/lm77niYfnmoTmr5Tkvovov5vooYznvKnmlL4KCiAgICAgICAgdGVtcFdpZHRoID0gaW1hZ2VXICogbWF4SGVpZ2h0IC8gaW1hZ2VIOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOaMieWOn+WbvueJh+eahOWkp+Wwj+i/m+ihjOe8qeaUvgogICAgICAgIHRlbXBXaWR0aCA9IGltYWdlVzsKICAgICAgICB0ZW1wSGVpZ2h0ID0gaW1hZ2VIOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgd2lkdGg6IHBhcnNlSW50KHRlbXBXaWR0aCksCiAgICAgIGhlaWdodDogcGFyc2VJbnQodGVtcEhlaWdodCkKICAgIH07CiAgfQp9OyAvLyDojrflj5bog4zmma/lm77niYd4eeWBj+enu+mHjwoKCnZhciBnZXRCZ0ltZ1hZT2Zmc2V0ID0gZnVuY3Rpb24gZ2V0QmdJbWdYWU9mZnNldCh3aWR0aCwgaGVpZ2h0LCBDX1dJRFRILCBDX0hFSUdIVCkgewogIGlmICh3aWR0aCkgewogICAgcmV0dXJuIENfV0lEVEggPiB3aWR0aCA/IE1hdGguZmxvb3IoQ19XSURUSCAtIHdpZHRoKSAvIDIgOiAwOwogIH0KCiAgaWYgKGhlaWdodCkgewogICAgcmV0dXJuIENfSEVJR0hUID4gaGVpZ2h0ID8gTWF0aC5mbG9vcihDX0hFSUdIVCAtIGhlaWdodCkgLyAyIDogMDsKICB9Cn07IC8vIOaXi+i9rOS4reW/g+eCuQoKCnZhciByb3RhdGVQb2ludCA9IGZ1bmN0aW9uIHJvdGF0ZVBvaW50KF9yZWYsIHJhZCkgewogIHZhciB4ID0gX3JlZi54LAogICAgICB5ID0gX3JlZi55OwogIHZhciByY29zID0gTWF0aC5jb3MocmFkKTsKICB2YXIgcnNpbiA9IE1hdGguc2luKHJhZCk7CiAgcmV0dXJuIHsKICAgIHg6IHggKiByY29zIC0geSAqIHJzaW4sCiAgICB5OiB5ICogcmNvcyArIHggKiByc2luCiAgfTsKfTsKCnZhciByb3RhdGVBcm91bmRDZW50ZXIgPSBmdW5jdGlvbiByb3RhdGVBcm91bmRDZW50ZXIobm9kZSwgcm90YXRpb24pIHsKICB2YXIgdG9wTGVmdCA9IHsKICAgIHg6IC1ub2RlLndpZHRoKCkgLyAyLAogICAgeTogLW5vZGUuaGVpZ2h0KCkgLyAyCiAgfTsKICB2YXIgY3VycmVudCA9IHJvdGF0ZVBvaW50KHRvcExlZnQsIEtvbnZhLmdldEFuZ2xlKG5vZGUucm90YXRpb24oKSkpOwogIHZhciByb3RhdGVkID0gcm90YXRlUG9pbnQodG9wTGVmdCwgS29udmEuZ2V0QW5nbGUocm90YXRpb24pKTsKICB2YXIgZHggPSByb3RhdGVkLnggLSBjdXJyZW50LngsCiAgICAgIGR5ID0gcm90YXRlZC55IC0gY3VycmVudC55OwogIG5vZGUucm90YXRpb24ocm90YXRpb24pOwogIG5vZGUueChub2RlLngoKSArIGR4KTsKICBub2RlLnkobm9kZS55KCkgKyBkeSk7Cn07IC8vIOmYsuaKlgoKCnZhciBkZWJvdW5jZSA9IGZ1bmN0aW9uIGRlYm91bmNlKGZuLCBkZWxheSkgewogIHZhciB0aW1lciA9IG51bGw7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gbGV0IHRoYXQgPSB0aGlzOwogICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CiAgICBjbGVhclRpbWVvdXQodGltZXIpOwogICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgZm4uYXBwbHkoX3RoaXMsIGFyZ3MpOwogICAgfSwgZGVsYXkpOwogIH07Cn07CgpleHBvcnQgeyBzY2FsZVdILCBpbWFnZUxpc3QsIGdldEJnSW1nWFlPZmZzZXQsIHJvdGF0ZUFyb3VuZENlbnRlciwgZGVib3VuY2UgfTs="},{"version":3,"sources":["/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/page/util.js"],"names":["Konva","imageList","scaleWH","imageW","imageH","maxWidth","maxHeight","tempWidth","tempHeight","width","parseInt","height","getBgImgXYOffset","C_WIDTH","C_HEIGHT","Math","floor","rotatePoint","rad","x","y","rcos","cos","rsin","sin","rotateAroundCenter","node","rotation","topLeft","current","getAngle","rotated","dx","dy","debounce","fn","delay","timer","args","arguments","clearTimeout","setTimeout","apply"],"mappings":"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","sourcesContent":["import Konva from \"konva\";\n\nconst imageList = [\n  // \"http://lorempixel.com/400/400/fashion\",\n  \"https://img.vipkidstatic.com/beeschool/server/20200827/235cd851-2a51-4745-b5a5-5c2451fb8e59.jpg\", // 2400×1128\n  \"https://media.vipkidstatic.com/beeschool/default/20200728/dd480c03-1e7e-491f-a138-8f4382496fde.png\", // 1405x1047\n\n  \"https://media.vipkidstatic.com/beeschool/default/20200728/ebd52306-1a83-4963-b205-e369508c37a4.jpeg\",\n\n  \" https://img.vipkidstatic.com/beeschool/server/20200826/13bedc97-d47b-4fc3-9a34-20652a9c5061.png\",\n  \"https://img.vipkidstatic.com/beeschool/server/20200825/4088c882-69ed-4f2a-b284-0241af83ce4c.png\",\n  \"https://img.vipkidstatic.com/beeschool/server/20200825/eb627ba4-1238-44b6-8e90-57b35e3e7721.png\",\n  \"https://img.vipkidstatic.com/beeschool/server/1598337872549/WechatIMG35.jpeg\",\n  \"https://imgx.vipkidstatic.com/img/beeschool/server/20200804/b7f4ad3e-1131-4778-a6ad-cbbdef5c0218.jpg\"\n\n  // \"http://b.hiphotos.baidu.com/image/pic/item/359b033b5bb5c9ea5c0e3c23d139b6003bf3b374.jpg\", // 800×533\n  // \"http://a.hiphotos.baidu.com/image/pic/item/8d5494eef01f3a292d2472199d25bc315d607c7c.jpg\",\n  // \"http://g.hiphotos.baidu.com/image/pic/item/6d81800a19d8bc3e770bd00d868ba61ea9d345f2.jpg\"\n];\n\n// const C_WIDTH = 1200;\n// const C_HEIGHT = 700;\n\n// 缩放后大小\nconst scaleWH = (imageW, imageH, maxWidth, maxHeight) => {\n  // 用于设定图片的宽度和高度\n  let tempWidth;\n  let tempHeight;\n\n  if (imageW > 0 && imageH > 0) {\n    //原图片宽高比例 大于 指定的宽高比例，这就说明了原图片的宽度必然 > 高度\n    if (imageW / imageH >= maxWidth / maxHeight) {\n      if (imageW > maxWidth) {\n        tempWidth = maxWidth;\n        // 按原图片的比例进行缩放\n        tempHeight = (imageH * maxWidth) / imageW;\n      } else {\n        // 按原图片的大小进行缩放\n        tempWidth = imageW;\n        tempHeight = imageH;\n      }\n    } else {\n      // 原图片的高度必然 > 宽度\n      if (imageH > maxHeight) {\n        tempHeight = maxHeight;\n        // 按原图片的比例进行缩放\n        tempWidth = (imageW * maxHeight) / imageH;\n      } else {\n        // 按原图片的大小进行缩放\n        tempWidth = imageW;\n        tempHeight = imageH;\n      }\n    }\n    return {\n      width: parseInt(tempWidth),\n      height: parseInt(tempHeight)\n    };\n  }\n};\n\n// 获取背景图片xy偏移量\nconst getBgImgXYOffset = (width, height, C_WIDTH, C_HEIGHT) => {\n  if (width) {\n    return C_WIDTH > width ? Math.floor(C_WIDTH - width) / 2 : 0;\n  }\n  if (height) {\n    return C_HEIGHT > height ? Math.floor(C_HEIGHT - height) / 2 : 0;\n  }\n};\n\n// 旋转中心点\nconst rotatePoint = ({ x, y }, rad) => {\n  const rcos = Math.cos(rad);\n  const rsin = Math.sin(rad);\n  return { x: x * rcos - y * rsin, y: y * rcos + x * rsin };\n};\n\nconst rotateAroundCenter = (node, rotation) => {\n  const topLeft = { x: -node.width() / 2, y: -node.height() / 2 };\n  const current = rotatePoint(topLeft, Konva.getAngle(node.rotation()));\n  const rotated = rotatePoint(topLeft, Konva.getAngle(rotation));\n  const dx = rotated.x - current.x,\n    dy = rotated.y - current.y;\n  node.rotation(rotation);\n  node.x(node.x() + dx);\n  node.y(node.y() + dy);\n};\n\n// 防抖\nconst debounce = (fn, delay) => {\n  let timer = null;\n  return function() {\n    // let that = this;\n    let args = arguments;\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      fn.apply(this, args);\n    }, delay);\n  };\n};\n\nexport { scaleWH, imageList, getBgImgXYOffset, rotateAroundCenter, debounce };\n"]}]}