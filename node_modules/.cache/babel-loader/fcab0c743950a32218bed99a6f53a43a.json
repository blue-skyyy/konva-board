{"remainingRequest":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/babel-loader/lib/index.js!/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/eslint-loader/index.js??ref--13-0!/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/utils.js","dependencies":[{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/utils.js","mtime":1599816203774},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/cache-loader/dist/cjs.js","mtime":1591588454175},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/babel-loader/lib/index.js","mtime":1606707433631},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/eslint-loader/index.js","mtime":1591241791494}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Cgp2YXIgaXNJbWFnZVZhaWxkID0gZnVuY3Rpb24gaXNJbWFnZVZhaWxkKHVybCkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAvLyDpppblhYjojrflj5blm77niYflpKflsI8KICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsgLy8gaW1nLmNyb3NzT3JpZ2luID0gImFub255bW91cyI7CgogICAgaW1nLnNldEF0dHJpYnV0ZSgiY3Jvc3NPcmlnaW4iLCAiQW5vbnltb3VzIik7CiAgICBpbWcuc3JjID0gdXJsOwoKICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJlc29sdmUoewogICAgICAgIHdpZHRoOiBpbWcud2lkdGgsCiAgICAgICAgaGVpZ2h0OiBpbWcuaGVpZ2h0LAogICAgICAgIHVybDogdXJsLAogICAgICAgIHN0YXR1czogIm9rIgogICAgICB9KTsKICAgIH07CgogICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIOS4jeWQiOazleabv+aNogogICAgICByZWplY3QoewogICAgICAgIHN0YXR1czogImZhaWwiLAogICAgICAgIHVybDogImh0dHBzOi8vdHBjLmdvb2dsZXN5bmRpY2F0aW9uLmNvbS9zaW1nYWQvMTI1NTUxMzg4MjY4NzAzMTIxMTcvZG93bnNpemVfMjAwa192MT93PTQwMCZoPTIwOSIKICAgICAgfSk7CiAgICB9OwogIH0pOwp9OwoKdmFyIGRlYm91bmNlID0gZnVuY3Rpb24gZGVib3VuY2UoZm4sIGRlbGF5KSB7CiAgdmFyIHRpbWVyID0gbnVsbDsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHRoYXQgPSB0aGlzOwogICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CiAgICBpZiAodGltZXIpIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBmbi5hcHBseSh0aGF0LCBhcmdzKTsKICAgIH0sIGRlbGF5KTsKICB9Owp9OwoKdmFyIGNvbXBvc2VDYW52YXMgPSBmdW5jdGlvbiBjb21wb3NlQ2FudmFzKHdpZHRoLCBoZWlnaHQsIGMxLCBjMikgewogIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKICBjYW52YXMud2lkdGggPSB3aWR0aDsKICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICBjdHguZHJhd0ltYWdlKGMyLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTsgLy8g5Zyo5LiL6YG/5YWN57q/5p2h6KaG55uWCgogIGN0eC5kcmF3SW1hZ2UoYzEsIDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogIHZhciB1cmwgPSBjYW52YXMudG9EYXRhVVJMKCk7CiAgY2FudmFzID0gbnVsbDsKICByZXR1cm4gdXJsOwp9OwoKZXhwb3J0IHsgaXNJbWFnZVZhaWxkLCBkZWJvdW5jZSwgY29tcG9zZUNhbnZhcyB9Ow=="},{"version":3,"sources":["/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/utils.js"],"names":["isImageVaild","url","Promise","resolve","reject","img","Image","setAttribute","src","onload","width","height","status","onerror","debounce","fn","delay","timer","that","args","arguments","clearTimeout","setTimeout","apply","composeCanvas","c1","c2","canvas","document","createElement","ctx","getContext","drawImage","toDataURL"],"mappings":";;AAAA,IAAMA,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD,EAAS;AAC5B,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC;AACA,QAAIC,GAAG,GAAG,IAAIC,KAAJ,EAAV,CAFsC,CAGtC;;AACAD,IAAAA,GAAG,CAACE,YAAJ,CAAiB,aAAjB,EAAgC,WAAhC;AACAF,IAAAA,GAAG,CAACG,GAAJ,GAAUP,GAAV;;AACAI,IAAAA,GAAG,CAACI,MAAJ,GAAa,YAAM;AACjBN,MAAAA,OAAO,CAAC;AACNO,QAAAA,KAAK,EAAEL,GAAG,CAACK,KADL;AAENC,QAAAA,MAAM,EAAEN,GAAG,CAACM,MAFN;AAGNV,QAAAA,GAAG,EAAEA,GAHC;AAINW,QAAAA,MAAM,EAAE;AAJF,OAAD,CAAP;AAMD,KAPD;;AAQAP,IAAAA,GAAG,CAACQ,OAAJ,GAAc,YAAM;AAClB;AACAT,MAAAA,MAAM,CAAC;AACLQ,QAAAA,MAAM,EAAE,MADH;AAELX,QAAAA,GAAG,EACD;AAHG,OAAD,CAAN;AAKD,KAPD;AAQD,GAtBM,CAAP;AAuBD,CAxBD;;AA0BA,IAAMa,QAAQ,GAAG,SAAXA,QAAW,CAACC,EAAD,EAAKC,KAAL,EAAe;AAC9B,MAAIC,KAAK,GAAG,IAAZ;AACA,SAAO,YAAW;AAChB,QAAIC,IAAI,GAAG,IAAX;AACA,QAAIC,IAAI,GAAGC,SAAX;AACA,QAAIH,KAAJ,EAAWI,YAAY,CAACJ,KAAD,CAAZ;AACXA,IAAAA,KAAK,GAAGK,UAAU,CAAC,YAAM;AACvBP,MAAAA,EAAE,CAACQ,KAAH,CAASL,IAAT,EAAeC,IAAf;AACD,KAFiB,EAEfH,KAFe,CAAlB;AAGD,GAPD;AAQD,CAVD;;AAYA,IAAMQ,aAAa,GAAG,SAAhBA,aAAgB,CAACd,KAAD,EAAQC,MAAR,EAAgBc,EAAhB,EAAoBC,EAApB,EAA2B;AAC/C,MAAIC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAb;AACAF,EAAAA,MAAM,CAACjB,KAAP,GAAeA,KAAf;AACAiB,EAAAA,MAAM,CAAChB,MAAP,GAAgBA,MAAhB;AACA,MAAImB,GAAG,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAV;AACAD,EAAAA,GAAG,CAACE,SAAJ,CAAcN,EAAd,EAAkB,CAAlB,EAAqB,CAArB,EAAwBhB,KAAxB,EAA+BC,MAA/B,EAL+C,CAM/C;;AACAmB,EAAAA,GAAG,CAACE,SAAJ,CAAcP,EAAd,EAAkB,CAAlB,EAAqB,CAArB,EAAwBf,KAAxB,EAA+BC,MAA/B;AACA,MAAIV,GAAG,GAAG0B,MAAM,CAACM,SAAP,EAAV;AACAN,EAAAA,MAAM,GAAG,IAAT;AACA,SAAO1B,GAAP;AACD,CAXD;;AAYA,SAASD,YAAT,EAAuBc,QAAvB,EAAiCU,aAAjC","sourcesContent":["const isImageVaild = (url) => {\n  return new Promise((resolve, reject) => {\n    // 首先获取图片大小\n    let img = new Image();\n    // img.crossOrigin = \"anonymous\";\n    img.setAttribute(\"crossOrigin\", \"Anonymous\");\n    img.src = url;\n    img.onload = () => {\n      resolve({\n        width: img.width,\n        height: img.height,\n        url: url,\n        status: \"ok\"\n      });\n    };\n    img.onerror = () => {\n      // 不合法替换\n      reject({\n        status: \"fail\",\n        url:\n          \"https://tpc.googlesyndication.com/simgad/12555138826870312117/downsize_200k_v1?w=400&h=209\"\n      });\n    };\n  });\n};\n\nconst debounce = (fn, delay) => {\n  let timer = null;\n  return function() {\n    let that = this;\n    let args = arguments;\n    if (timer) clearTimeout(timer);\n    timer = setTimeout(() => {\n      fn.apply(that, args);\n    }, delay);\n  };\n};\n\nconst composeCanvas = (width, height, c1, c2) => {\n  let canvas = document.createElement(\"canvas\");\n  canvas.width = width;\n  canvas.height = height;\n  let ctx = canvas.getContext(\"2d\");\n  ctx.drawImage(c2, 0, 0, width, height);\n  // 在下避免线条覆盖\n  ctx.drawImage(c1, 0, 0, width, height);\n  let url = canvas.toDataURL();\n  canvas = null;\n  return url;\n};\nexport { isImageVaild, debounce, composeCanvas };\n"]}]}