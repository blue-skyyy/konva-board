{"remainingRequest":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/babel-loader/lib/index.js!/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/page/menu/zoom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/src/page/menu/zoom.vue","mtime":1600247280958},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/cache-loader/dist/cjs.js","mtime":1591588454175},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/babel-loader/lib/index.js","mtime":1591149279866},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/cache-loader/dist/cjs.js","mtime":1591588454175},{"path":"/Users/haopeiwei/Documents/hpw/web-board/konva-board/node_modules/vue-loader/lib/index.js","mtime":1592981491866}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZmFicmljIH0gZnJvbSAiZmFicmljIjsKaW1wb3J0IGljb25zIGZyb20gIi4uL2ljb25zLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB6b29tU3RhdHVzOiB7CiAgICAgIGRlZmF1bHQ6ICIiLAogICAgICB0eXBlOiBTdHJpbmcKICAgIH0sCiAgICBjYW52YXM6IHsKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7fSwKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgem9vbUluOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgem9vbU91dDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHpvb21TdGVwOiAwLjEsCiAgICAgIGljb25zOiBpY29ucwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNldFpvb206IGZ1bmN0aW9uIHNldFpvb20odHlwZSkgewogICAgICAvLyDku6XkuK3lv4PngrnkuLrln7rngrnlgZrnvKnmlL4KICAgICAgdmFyIHpvb20gPSB0aGlzLmNhbnZhcy5nZXRab29tKCk7CiAgICAgIHZhciBjZW50ZXIgPSB0aGlzLmNhbnZhcy5nZXRDZW50ZXIoKTsKICAgICAgY29uc29sZS5sb2coY2VudGVyLmxlZnQsIGNlbnRlci5sZWZ0ICogMC45KTsKICAgICAgdmFyIHpvb21Qb2ludCA9IG5ldyBmYWJyaWMuUG9pbnQoY2VudGVyLmxlZnQsIGNlbnRlci50b3ApOwoKICAgICAgaWYgKHR5cGUgPT0gIm91dCIpIHsKICAgICAgICAvLyDmlL7lpKcKICAgICAgICB6b29tID0gem9vbSArIHRoaXMuem9vbVN0ZXA7CiAgICAgICAgem9vbSA9IE1hdGgubWluKDMsIHpvb20pOyAvL+acgOWkp+aYr+WOn+adpeeahDPlgI0KCiAgICAgICAgdGhpcy5jYW52YXMuem9vbVRvUG9pbnQoem9vbVBvaW50LCB6b29tKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGUgPT09ICJpbiIpIHsKICAgICAgICB6b29tID0gem9vbSAtIHRoaXMuem9vbVN0ZXA7CiAgICAgICAgem9vbSA9IE1hdGgubWF4KDAuMSwgem9vbSk7IC8v5pyA5bCP5Li65Y6f5p2l55qEMS8xMAoKICAgICAgICB0aGlzLmNhbnZhcy56b29tVG9Qb2ludCh6b29tUG9pbnQsIHpvb20pOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgc2V0U3R5bGU6IGZ1bmN0aW9uIHNldFN0eWxlKCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKHpvb21Jbiwgem9vbU91dCkgewogICAgICAgIGlmICh6b29tSW4gJiYgem9vbU91dCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGlzcGxheTogImZsZXgiLAogICAgICAgICAgICBmbGV4OiAyCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaWYgKCF6b29tSW4gJiYgIXpvb21PdXQpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRpc3BsYXk6ICJub25lIgogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXNwbGF5OiAiZmxleCIsCiAgICAgICAgICBmbGV4OiAxCiAgICAgICAgfTsKICAgICAgfTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["zoom.vue"],"names":[],"mappings":";;;;;;;;;;;AAYA,SAAA,MAAA,QAAA,QAAA;AACA,OAAA,KAAA,MAAA,aAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KADA;AAKA,IAAA,MAAA,EAAA;AACA,MAAA,OAAA,EAAA,oBAAA,CAAA,CADA;AAEA,MAAA,IAAA,EAAA;AAFA,KALA;AASA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KATA;AAaA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAbA,GADA;AAmBA,EAAA,IAnBA,kBAmBA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,GADA;AAEA,MAAA,KAAA,EAAA;AAFA,KAAA;AAIA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,mBACA,IADA,EACA;AACA;AACA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,OAAA,EAAA;AACA,UAAA,MAAA,GAAA,KAAA,MAAA,CAAA,SAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,IAAA,EAAA,MAAA,CAAA,IAAA,GAAA,GAAA;AACA,UAAA,SAAA,GAAA,IAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,IAAA,EAAA,MAAA,CAAA,GAAA,CAAA;;AACA,UAAA,IAAA,IAAA,KAAA,EAAA;AACA;AACA,QAAA,IAAA,GAAA,IAAA,GAAA,KAAA,QAAA;AACA,QAAA,IAAA,GAAA,IAAA,CAAA,GAAA,CAAA,CAAA,EAAA,IAAA,CAAA,CAHA,CAGA;;AACA,aAAA,MAAA,CAAA,WAAA,CAAA,SAAA,EAAA,IAAA;AACA;;AACA,UAAA,IAAA,KAAA,IAAA,EAAA;AACA,QAAA,IAAA,GAAA,IAAA,GAAA,KAAA,QAAA;AACA,QAAA,IAAA,GAAA,IAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,CAFA,CAEA;;AACA,aAAA,MAAA,CAAA,WAAA,CAAA,SAAA,EAAA,IAAA;AACA;AACA;AAlBA,GAzBA;AA6CA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,UAAA,MAAA,EAAA,OAAA,EAAA;AACA,YAAA,MAAA,IAAA,OAAA,EAAA;AACA,iBAAA;AACA,YAAA,OAAA,EAAA,MADA;AAEA,YAAA,IAAA,EAAA;AAFA,WAAA;AAIA;;AACA,YAAA,CAAA,MAAA,IAAA,CAAA,OAAA,EAAA;AACA,iBAAA;AACA,YAAA,OAAA,EAAA;AADA,WAAA;AAGA;;AAEA,eAAA;AACA,UAAA,OAAA,EAAA,MADA;AAEA,UAAA,IAAA,EAAA;AAFA,SAAA;AAIA,OAjBA;AAkBA;AApBA;AA7CA,CAAA","sourcesContent":["<template>\n  <div class=\"menu_zoom\" :style=\"setStyle(zoomIn, zoomOut)\">\n    <div @click=\"setZoom('out')\" :style=\"!zoomOut && 'display:none'\">\n      <div class=\"icon\" v-html=\"icons.zoomOut\"></div>\n    </div>\n    <div :style=\"!zoomIn && 'display:none'\" @click=\"setZoom('in')\">\n      <div class=\"icon\" v-html=\"icons.zoomIn\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fabric } from \"fabric\";\nimport icons from \"../icons.js\";\nexport default {\n  props: {\n    zoomStatus: {\n      default: \"\",\n      type: String\n    },\n    canvas: {\n      default: () => {},\n      type: Object\n    },\n    zoomIn: {\n      type: Boolean,\n      default: false\n    },\n    zoomOut: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      zoomStep: 0.1,\n      icons\n    };\n  },\n  methods: {\n    setZoom(type) {\n      // 以中心点为基点做缩放\n      let zoom = this.canvas.getZoom();\n      let center = this.canvas.getCenter();\n      console.log(center.left, center.left * 0.9);\n      let zoomPoint = new fabric.Point(center.left, center.top);\n      if (type == \"out\") {\n        // 放大\n        zoom = zoom + this.zoomStep;\n        zoom = Math.min(3, zoom); //最大是原来的3倍\n        this.canvas.zoomToPoint(zoomPoint, zoom);\n      }\n      if (type === \"in\") {\n        zoom = zoom - this.zoomStep;\n        zoom = Math.max(0.1, zoom); //最小为原来的1/10\n        this.canvas.zoomToPoint(zoomPoint, zoom);\n      }\n    }\n  },\n  computed: {\n    setStyle() {\n      return function(zoomIn, zoomOut) {\n        if (zoomIn && zoomOut) {\n          return {\n            display: \"flex\",\n            flex: 2\n          };\n        }\n        if (!zoomIn && !zoomOut) {\n          return {\n            display: \"none\"\n          };\n        }\n\n        return {\n          display: \"flex\",\n          flex: 1\n        };\n      };\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.menu_zoom {\n  display: flex;\n  // background: red;\n  justify-content: space-around;\n}\n</style>\n"],"sourceRoot":"src/page/menu"}]}